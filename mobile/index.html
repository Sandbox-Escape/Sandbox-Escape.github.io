<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sandbox Escape Official</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAACMs/FzAAAAQlBMVEX////y8vL19fX5+fn8/Pz39/f6+vrz8/P////u7u7w8PDt7e3y8vL////w8PD////x8fH////x8fH29vb////x8fH///+Fj/etAAABsklEQVR4nO3b246bMBiA0cgJgYSAQO7/Pms3M6kHnaSj2fP7LgG5B/VqjYSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOC3u+yHl+Tj8Yg8Lp/uT5Pj8Yg8Pj+f7k+T4/GIPD4/n+5Pk+PxiDw+P5/uT5Pj8Yg8Pj+f7k+T4/GIPD4/n+5Pk+PxiDw+P5/uT5Pj8Yg8Pj+f7k+T4/Fk3h8n0+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mx+PxfH4+3Z8mRyP5vD9Pjsfz+fl0f5ocj+fz8+n+NDkez+fn0/1pciy+P02Ox/P5+XR/mhyP5/Pz6f40OR7P5+fT/WlyPJ7Pz6f70+R4PJ+fT/enSXB4fp4cj+fz8+n+NDkez+fn0/1pchy+P02Ox/P5+XR/mhyP5/Pz6f40OR7P5+fT/WlyPJ7Pz6f70+R4PJ+fT/enSXB4fp4cj+fz8+n+NDkez+fn0/1pchy+P02Ox/P5+XR/mhyP5/Pz6f40OR7P5+fT/WlyPJ7Pz6f70+R4PJ+fT/enSXB4fp4AAAAAAAAAAAAAAAAAAAAAAAAAAAAA+A/d62L+AIlqgAAAAABJRU5ErkJggg==">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Solid dark background */
            padding-bottom: 6rem; /* Space for bottom nav */
            overflow-x: hidden; /* Prevent horizontal scroll during transitions */
        }
        .card {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(75, 85, 99, 0.5);
        }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }

        /* Page container styles */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            transition: transform 0.3s ease-in-out;
            padding: 1rem;
        }
        .page.hidden {
            transform: translateX(100%);
        }
        .page.active {
            transform: translateX(0);
        }
        /* Special case for hiding to the left */
        .page.hide-left {
             transform: translateX(-100%);
        }

        /* Active nav button style */
        .nav-btn.active {
            color: #22d3ee; /* cyan-400 */
        }
    </style>
</head>
<body class="text-white antialiased">

    <!-- Page Wrapper -->
    <div class="relative w-full h-full">

        <!-- Home Page -->
        <div id="home-page" class="page active">
            <header class="text-center my-8">
                <img id="avatar" src="https://placehold.co/128x128/1a202c/ffffff?text=Org" alt="GitHub Avatar" class="w-28 h-28 rounded-full mx-auto mb-4 border-4 border-gray-600 shadow-lg">
                <h1 id="name" class="text-3xl font-bold text-gray-100">Organization Name</h1>
                <p id="bio" class="text-md text-gray-400 mt-2 max-w-xl mx-auto">Organization description will appear here.</p>
            </header>
            <main>
                <h2 class="text-2xl font-bold text-center mb-6 text-gray-200">Our Repositories</h2>
                <div id="repos-container" class="space-y-4">
                    <div class="text-center p-8"><p class="text-gray-400">Loading repositories...</p></div>
                </div>
            </main>
        </div>

        <!-- My SE Page -->
        <div id="my-se-page" class="page hidden">
            <h1 class="text-3xl font-bold text-center my-8">My Contributions</h1>
            <form id="contribution-form" class="flex flex-col gap-2 mb-4 max-w-md mx-auto">
                <input type="text" id="github-username-input" placeholder="Enter your GitHub username" class="w-full bg-gray-800 text-white border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500">
                <button type="submit" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">Search</button>
            </form>
            <div id="contributions-container" class="overflow-y-auto p-1 space-y-3 max-w-md mx-auto">
                <p class="text-center text-gray-400">Enter your username to see your contributions.</p>
            </div>
        </div>

        <!-- Credits Page -->
        <div id="credits-page" class="page hidden">
             <h1 class="text-3xl font-bold text-center my-8">Credits</h1>
             <div id="members-container" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 max-w-xl mx-auto">
                <p class="col-span-full text-center text-gray-400">Loading members...</p>
            </div>
        </div>

        <!-- Join Page -->
        <div id="join-page" class="page hidden p-0 sm:p-2">
             <div class="w-full h-screen flex flex-col relative bg-gray-800">
                <iframe class="w-full h-full border-0" src="https://docs.google.com/forms/d/e/1FAIpQLSdQaUx6Kh371zJ-pJD7gVMSqKSO9WYVspqPBe4OBsjK_CV5RA/viewform?embedded=true" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
            </div>
        </div>

    </div>
    
    <!-- Bottom Navigation Bar -->
    <nav class="fixed bottom-0 left-0 right-0 z-50 bg-gray-800 border-t border-gray-700">
        <div class="container mx-auto">
            <div class="flex items-center justify-around h-20">
                <button id="home-btn" class="nav-btn flex flex-col items-center justify-center transition-colors active">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    <span class="text-xs mt-1">Home</span>
                </button>
                <button id="my-se-btn" class="nav-btn flex flex-col items-center justify-center text-gray-400 hover:text-cyan-400 transition-colors">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    <span class="text-xs mt-1">My SE</span>
                </button>
                <button id="credits-btn" class="nav-btn flex flex-col items-center justify-center text-gray-400 hover:text-cyan-400 transition-colors">
                     <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    <span class="text-xs mt-1">Credits</span>
                </button>
                <button id="join-btn" class="nav-btn flex flex-col items-center justify-center text-gray-400 hover:text-cyan-400 transition-colors">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
                    <span class="text-xs mt-1">Join</span>
                </button>
            </div>
        </div>
    </nav>
    
    <script>
        const GITHUB_ORG_NAME = 'Sandbox-Escape'; 
        const nameEl = document.getElementById('name');
        const bioEl = document.getElementById('bio');
        const avatarEl = document.getElementById('avatar');
        const reposContainerEl = document.getElementById('repos-container');
        
        const homeBtn = document.getElementById('home-btn');
        const creditsBtn = document.getElementById('credits-btn');
        const joinBtn = document.getElementById('join-btn');
        const mySeBtn = document.getElementById('my-se-btn');
        
        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.nav-btn');
        
        const membersContainer = document.getElementById('members-container');
        const contributionForm = document.getElementById('contribution-form');
        const contributionsContainer = document.getElementById('contributions-container');
        const usernameInput = document.getElementById('github-username-input');

        const ORG_API_URL = `https://api.github.com/orgs/${GITHUB_ORG_NAME}`;
        const REPOS_API_URL = `https://api.github.com/orgs/${GITHUB_ORG_NAME}/repos?sort=updated&per_page=100`;
        const MEMBERS_API_URL = `https://api.github.com/orgs/${GITHUB_ORG_NAME}/public_members`;
        const userEventsUrl = (username) => `https://api.github.com/users/${username}/events/public`;

        let currentActivePage = 'home-page';
        let dataFetched = {
            credits: false,
            contributions: false
        };

        function showPage(pageId) {
            const newPageIndex = Array.from(pages).findIndex(p => p.id === pageId);
            const currentPageIndex = Array.from(pages).findIndex(p => p.id === currentActivePage);

            pages.forEach((page, index) => {
                if (page.id === pageId) {
                    page.classList.remove('hidden', 'hide-left');
                    page.classList.add('active');
                } else {
                    if (page.classList.contains('active')) {
                         if (newPageIndex > currentPageIndex) {
                            page.classList.add('hide-left');
                         }
                         page.classList.remove('active');
                    } else {
                        page.classList.remove('hide-left');
                    }
                }
            });

            navButtons.forEach(btn => {
                btn.classList.toggle('active', btn.id === `${pageId.split('-')[0]}-btn`);
                btn.classList.toggle('text-gray-400', btn.id !== `${pageId.split('-')[0]}-btn`);
            });

            currentActivePage = pageId;

            // Fetch data for the new page if needed
            if (pageId === 'credits-page' && !dataFetched.credits) {
                fetchOrgMembers();
                dataFetched.credits = true;
            }
        }

        async function fetchApi(url, errorMessage) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
                return await response.json();
            } catch (error) {
                console.error(errorMessage, error);
                throw error;
            }
        }

        async function fetchOrgProfile() {
            try {
                const org = await fetchApi(ORG_API_URL, 'Error fetching organization profile:');
                avatarEl.src = org.avatar_url || 'https://placehold.co/128x128/1a202c/ffffff?text=Org';
                nameEl.textContent = org.name || org.login;
                bioEl.textContent = org.description || 'An awesome organization on GitHub.';
            } catch {
                nameEl.textContent = 'Error';
                bioEl.textContent = 'Could not fetch organization profile data.';
            }
        }

        async function fetchOrgRepos() {
            try {
                const repos = await fetchApi(REPOS_API_URL, 'Error fetching repositories:');
                reposContainerEl.innerHTML = '';
                if (repos.length === 0) {
                    reposContainerEl.innerHTML = '<p class="text-center text-gray-400">No public repositories found.</p>';
                    return;
                }
                repos.filter(repo => !repo.fork).forEach(repo => {
                    const repoCard = `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="card rounded-lg p-4 block">
                            <h3 class="text-lg font-bold text-white mb-1 truncate">${repo.name}</h3>
                            <p class="text-gray-400 text-sm mb-3 h-10 overflow-hidden">${repo.description || 'No description provided.'}</p>
                            <div class="flex justify-between items-center text-sm text-gray-300">
                                <span>${repo.language || 'N/A'}</span>
                                <span>⭐ ${repo.stargazers_count}</span>
                            </div>
                        </a>`;
                    reposContainerEl.innerHTML += repoCard;
                });
            } catch {
                reposContainerEl.innerHTML = '<p class="text-center text-red-400">Could not fetch repositories.</p>';
            }
        }

        async function fetchOrgMembers() {
            membersContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">Loading members...</p>';
            try {
                const members = await fetchApi(MEMBERS_API_URL, 'Error fetching organization members:');
                membersContainer.innerHTML = '';
                if (members.length === 0) {
                    membersContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">No public members found.</p>';
                    return;
                }
                members.forEach(member => {
                    const memberCard = `
                        <a href="${member.html_url}" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center text-center">
                            <img src="${member.avatar_url}" alt="${member.login}" class="w-16 h-16 rounded-full border-2 border-gray-600">
                            <p class="text-xs mt-2 font-bold text-white truncate w-full">${member.login}</p>
                        </a>`;
                    membersContainer.innerHTML += memberCard;
                });
            } catch {
                membersContainer.innerHTML = '<p class="col-span-full text-center text-red-400">Could not fetch members.</p>';
            }
        }

        async function fetchUserContributions(username) {
            if (!username) {
                contributionsContainer.innerHTML = '<p class="text-center text-yellow-400">Please enter a username.</p>';
                return;
            }
            contributionsContainer.innerHTML = '<p class="text-center text-gray-400">Searching for contributions...</p>';
            try {
                const events = await fetchApi(userEventsUrl(username), 'Error fetching user contributions:');
                const orgEvents = events.filter(event => event.repo.name.startsWith(`${GITHUB_ORG_NAME}/`));
                if (orgEvents.length === 0) {
                    contributionsContainer.innerHTML = `<p class="text-center text-gray-400">No public contributions found for ${username} in this organization.</p>`;
                    return;
                }
                contributionsContainer.innerHTML = orgEvents.map(event => {
                    const repoName = event.repo.name.split('/')[1];
                    const eventDate = new Date(event.created_at).toLocaleDateString();
                    if (event.type === 'PushEvent') {
                        return `<div class="bg-gray-800/50 p-3 rounded-lg text-sm">Pushed to <a href="https://github.com/${event.repo.name}" target="_blank" class="font-bold text-cyan-400">${repoName}</a> on ${eventDate}</div>`;
                    } else if (event.type === 'PullRequestEvent') {
                        return `<div class="bg-gray-800/50 p-3 rounded-lg">${event.payload.action} a PR in <a href="${event.payload.pull_request.html_url}" target="_blank" class="font-bold text-cyan-400">${repoName}</a> on ${eventDate}</div>`;
                    }
                    return '';
                }).join('');
            } catch {
                contributionsContainer.innerHTML = `<p class="text-center text-red-400">Could not fetch contributions for ${username}.</p>`;
            }
        }

        function init() {
            fetchOrgProfile();
            fetchOrgRepos();
            
            homeBtn.addEventListener('click', () => showPage('home-page'));
            mySeBtn.addEventListener('click', () => showPage('my-se-page'));
            creditsBtn.addEventListener('click', () => showPage('credits-page'));
            joinBtn.addEventListener('click', () => showPage('join-page'));

            contributionForm.addEventListener('submit', (event) => {
                event.preventDefault();
                fetchUserContributions(usernameInput.value.trim());
            });
        }

        init();
    </script>
</body>
</html>
